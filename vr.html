<html>
  <!--<script src="js/main.js"></script>-->
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no "/>
  
  <script src="js/three.min.js"></script>
  <script src="js/OrbitControls.js"></script>	
  <script src="js/Detector.js"></script>
  <script src="js/DeviceOrientationControls.js"></script>
  <link rel="stylesheet" href="css/visione.css">
  <head>
    <title>TravelVR</title>
  </head>

  <body onclick="load()">
    <div class = "container" id ="container">
      <div class="meta" id="spheresx" style="background: blue;"></div>
      <div class="meta" id="spheredx" style="background: yellow;"></div>
      <img src="img/fullscreen-512.png" id="bottone" onclick="fullscreen()">
    </div>
  </body>
  <script>
    var fullscreen = function()
    {
      var elem = document.getElementById("container");
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
      } else if (elem.mozRequestFullScreen) {
        elem.mozRequestFullScreen();
      } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen(); 
      }
    }
    var load = function() {
      document.getElementById("spheresx");
      document.getElementById("spheredx");
      createRenderer("spheresx", "img/home.jpg");
      createRenderer("spheredx", "img/home.jpg");
    } 

    var createRenderer = function(divID, texture) {
      var webglEl = document.getElementById(divID);

      var width  = window.innerWidth,
          height = window.innerHeight;

      var scene = new THREE.Scene();

      var camera = new THREE.PerspectiveCamera(75, width / height, 1, 1000);
      camera.position.x = 0.1;

      var renderer = Detector.webgl ? new THREE.WebGLRenderer() : new THREE.CanvasRenderer();
      renderer.setSize(width, height);

      var sphere = new THREE.Mesh(
        new THREE.SphereGeometry(100, 20, 20),
        new THREE.MeshBasicMaterial({
          map: THREE.ImageUtils.loadTexture(texture)
        })
      );
      sphere.scale.x = -1;
      scene.add(sphere);

      var controls = new THREE.DeviceOrientationControls(camera);
      controls.noPan = true;
      controls.noZoom = true; 
      controls.autoRotate = false;
      //controls.autoRotateSpeed = 0.5;

      webglEl.appendChild(renderer.domElement);

      render();


      function render() {
        controls.update();
        requestAnimationFrame(render);
        renderer.render(scene, camera);
      }

      function onMouseWheel(event) {
        event.preventDefault();

        if (event.wheelDeltaY) { // WebKit
          camera.fov -= event.wheelDeltaY * 0.05;
        } else if (event.wheelDelta) { 	// Opera / IE9
          camera.fov -= event.wheelDelta * 0.05;
        } else if (event.detail) { // Firefox
          camera.fov += event.detail * 1.0;
        }

        camera.fov = Math.max(40, Math.min(100, camera.fov));
        camera.updateProjectionMatrix();
      }

      document.addEventListener('mousewheel', onMouseWheel, false);
      document.addEventListener('DOMMouseScroll', onMouseWheel, false);

    }
  </script>
</html>